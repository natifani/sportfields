<!-- Nagy Tifani Franciska 523 ntim1937 -->

<!DOCTYPE html>
<html lang="en">
<%- include("../views/partials/head.ejs", { title: "Field Reservation" }) %>
<body>
    <%- include("../views/partials/navbar.ejs")%>
    <div class="main">
        <h1>SPORTS FIELD RESERVATION</h1>
        <% if (message.includes('Unable to load data') || message.includes('Unable to insert data')) { %>
            <div class="field"> <%=message%> </div>
        <% } else { %>
                <% if(fields.length === 0) { %>
                <div class="field">
                    No fields available. Come back later!
                </div>
                <% } else { %>
                <form method="POST" action="/reserve_form" enctype="multipart/form-data"> 
                    <label class="sf-form-label">FIELD NAME</label>
                    <select id="field-select" name="clfname">
                        <option value="select">Select field...</option>
                        <% fields.forEach(field => { %>
                        <option value="<%=field.fieldID%>"><%=field.name%></option>
                        <% }) %>
                    </select>
                    <div id="listbox-div">
                        <span id="listbox-title-span"></span>
                        <ul id="reservations-ul"></ul>
                    </div>
                    <br>
                    <div id="reservations">
                        <input id="reserv-checkbox" name="reservCb" class="text-input" type="checkbox"/>
                        <label>RECURRENT RESERVATION</label>
                        <div id="interval-div">
                            <label class="sf-form-label">START DATE AND TIME</label>
                            <input class="text-input" type="datetime-local" name="startdatetime" pattern="^[0-9]{4}-(0[1-9]|1[0-2])-(0[0-9]|1[0-9]|2[0-9]|3[0-1])(T| )(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" placeholder="YYYY-MM-DD HH:MM"/>
                            <label class="sf-form-label">END DATE AND TIME</label>
                            <input class="text-input" type="datetime-local" name="enddatetime" pattern="^[0-9]{4}-(0[1-9]|1[0-2])-(0[0-9]|1[0-9]|2[0-9]|3[0-1])(T| )(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" placeholder="YYYY-MM-DD HH:MM"/>
                        </div>
                        <div id="recurrent-div">
                            <label class="sf-form-label">DAY</label>
                            <select name="clday">
                                <option value="monday">Monday</option>
                                <option value="tuesday">Tuesday</option>
                                <option value="wednesday">Wednesday</option>
                                <option value="thursday">Thursday</option>
                                <option value="friday">Friday</option>
                                <option value="saturday">Saturday</option>
                                <option value="sunday">Sunday</option>
                            </select>
                            <label class="sf-form-label">START HOUR</label>
                            <input class="text-input" type="time" name="starthour" placeholder="HH:MM" min="06:00" max="22:00"/>
                            <label class="sf-form-label">END HOUR</label>
                            <input class="text-input" type="time" name="endhour" placeholder="HH:MM" min="06:00" max="22:00"/>
                        </div>
                        <input type="submit" value="RESERVE" id="sf-reservebtn" />
                    </div>
                </form>
                <div id="err-div"></div>
            <% } %>
            <% if (message) { %>
                <div><%=message%></div>
            <% } %>
        <% } %>
    </div>
    <script src="client_form.js"></script>
</body>
</html>